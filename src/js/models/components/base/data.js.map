{"version":3,"sources":["models/components/base/data.ts"],"names":["MetaApp","MetaApp.Models","MetaApp.Models.Components","MetaApp.Models.Components.DataBase","MetaApp.Models.Components.DataBase.constructor","MetaApp.Models.Components.DataBase.setValue","MetaApp.Models.Components.DataBase.getValue","MetaApp.Models.Components.DataBase.destroy","MetaApp.Models.Components.DataBase.validate","MetaApp.Models.Components.DataBase.bind","MetaApp.Models.Components.DataBase.unbind","MetaApp.Models.Components.DataBase.onDataChange"],"mappings":"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","file":"models/components/base/data.js","sourcesContent":["///<reference path='../../../Contracts/IMetaDataComponent.ts'/>\r\n\r\n///<reference path='../../../extensions/converters/date.ts'/>\r\n///<reference path='../../../extensions/converters/number.ts'/>\r\n\r\n///<reference path='base/element.ts'/>\r\n\r\nmodule MetaApp.Models.Components {\r\n    /**\r\n     * Base class to describe containers. All container-based components should inherit from this base.\r\n     * Handle all child relations.\r\n     */\r\n    export class DataBase extends ElementBase implements Contracts.IMetaDataComponent {\r\n        binding: string;\r\n        value: any;\r\n        type: string;\r\n\r\n        constructor(meta: Contracts.IMetaDataComponent, options: any) {\r\n            super(meta, options);\r\n\r\n            this.binding = meta.binding;\r\n            this.type = meta.type;\r\n\r\n            this.bind();\r\n            (meta.value === undefined) || this.setValue(meta.value);\r\n        }\r\n\r\n        public setValue(value: any) {\r\n            this.value = value;\r\n\r\n            this.form && this.form.eventManager.trigger('data:' + this.binding, value);\r\n            this.form && this.form.eventManager.trigger('data:*', this.binding, value);\r\n        }\r\n\r\n        public getValue() {\r\n            return this.value;\r\n        }\r\n\r\n        public destroy() {\r\n            this.unbind();\r\n        }\r\n\r\n        public validate(): boolean {\r\n            return true;\r\n        }\r\n\r\n        private bind() {\r\n            this.form && this.form.eventManager.on('data:' + this.binding, this.onDataChange, this);\r\n        }\r\n\r\n        private unbind() {\r\n            this.form && this.form.eventManager.off('data:' + this.binding, this.onDataChange, this);\r\n        }\r\n\r\n        private onDataChange(value) {\r\n            var type = this.type && this.type.charAt(0).toUpperCase() + this.type.slice(1),\r\n                converter = type && MetaApp.Extensions.Converters[type + 'Converter'],\r\n                newValue = converter ? converter.getInstance().parse(value) : value;\r\n\r\n            if(newValue !== this.value)\r\n                this.value = newValue;\r\n        }\r\n    }\r\n}"],"sourceRoot":"/source/"}
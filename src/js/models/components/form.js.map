{"version":3,"sources":["models/components/form.ts"],"names":["MetaApp","MetaApp.Models","MetaApp.Models.Components","MetaApp.Models.Components.Form","MetaApp.Models.Components.Form.constructor","MetaApp.Models.Components.Form.validate","MetaApp.Models.Components.Form.destroy","MetaApp.Models.Components.Form.onDataChange","MetaApp.Models.Components.Form.setByPath","MetaApp.Models.Components.Form.getByPath"],"mappings":"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","file":"models/components/form.js","sourcesContent":["///<reference path='../../managers/eventManager.ts'/>\r\n///<reference path='base/container.ts'/>\r\n\r\nmodule MetaApp.Models.Components {\r\n    /**\r\n     * Form is the main logical container for some set of components which bound to some single data model.\r\n     * Form handle all communications inside this logical container and is fully isolated.\r\n     */\r\n    export class Form extends ContainerBase {\r\n        eventManager: Managers.EventManager;\r\n\r\n        data: any;\r\n        dataByBinding: any;\r\n        componentByName: any;\r\n\r\n        constructor(meta: Contracts.IMetaContainerComponent, options: any) {\r\n            this.eventManager = new Managers.EventManager();\r\n\r\n            this.data = {};\r\n            this.dataByBinding = {};\r\n            this.componentByName = {};\r\n\r\n            super(meta, {form: this});\r\n            this.eventManager.on('data:*', this.onDataChange, this);\r\n        }\r\n\r\n        public validate(): boolean {\r\n            var result = true;\r\n\r\n            for(var name in this.componentByName) {\r\n                result = result && this.componentByName[name].validate();\r\n            }\r\n\r\n            return result;\r\n        }\r\n\r\n        public destroy() {\r\n        }\r\n\r\n        private onDataChange(binding: string, value): void {\r\n            this.dataByBinding[binding] = value;\r\n            this.setByPath(binding, value);\r\n        }\r\n\r\n        private setByPath(binding: string, value): void {\r\n            var bindingParts = binding.split('.'),\r\n                data = this.data;\r\n\r\n            for(var i=0, len=bindingParts.length-1, b; i<len; i++) {\r\n                b = bindingParts[i];\r\n\r\n                data[b] || (data[b] = {});\r\n                data = data[b];\r\n            }\r\n\r\n            data[bindingParts[bindingParts.length-1]] = value;\r\n        }\r\n\r\n        private getByPath(binding: string): any {\r\n            var bindingParts = binding.split('.'),\r\n                data = this.data;\r\n\r\n            for(var i=0, len=bindingParts.length, b; i<len; i++) {\r\n                b = bindingParts[i];\r\n                data && data[b] && (data = data[b]);\r\n            }\r\n\r\n            return data;\r\n        }\r\n    }\r\n}"],"sourceRoot":"/source/"}